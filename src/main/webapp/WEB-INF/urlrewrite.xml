<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
        "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">
<urlrewrite>
	<!-- ======== ERROR PAGES ========== -->
	<rule>
		<from>^/not-found$</from>
		<to>/click/not-found.htm</to>
	</rule>
	<rule>
		<from>^/(\d+)$</from>
		<to>/click/error.htm?e=$1</to>
	</rule>
	<rule>
		<from>^/error$</from>
		<to>/click/error.htm</to>
	</rule>
	<!-- ======== PROTECTED ========== -->
	<rule>
		<from>^/p/(.*)$</from>
		<to type="redirect">%{context-path}/$1</to>
	</rule>
	<rule>
		<from>^(.*)\.vm$</from>
		<to type="redirect">%{context-path}/</to>
	</rule>
	<!-- ======== PUBLIC RESOURCES ========== -->
	<rule>
		<from>^/$</from>
		<to>/questions.htm</to>
	</rule>
	<!--    <rule>
			<from>^/index.htm$</from>
			<to type="redirect">%{context-path}</to>
	</rule>-->
	<rule>
		<from>^/signin(/?)$</from>
		<to>/signin.htm</to>
	</rule>
	<rule>
		<from>^/signout$</from>
		<to>/signin.htm?signout=true</to>
	</rule>
	<rule>
		<from>^/about(/?)$</from>
		<to>/about.htm</to>
	</rule>
	<rule>
		<from>^/tags(/?)$</from>
		<to>/tags.htm</to>
	</rule>
	<rule>
		<from>^/tags/name(/?)$</from>
		<to>/tags.htm?sortby=name</to>
	</rule>
	<rule>
		<from>^/terms(/?)$</from>
		<to>/terms.htm</to>
	</rule>
	<rule>
		<from>^/privacy(/?)$</from>
		<to>/privacy.htm</to>
	</rule>
	<rule>
		<from>^/favicon\.ico$</from>
		<to>/images/favicon.ico</to>
	</rule>
	<!-- ======== LANGUAGES ========== -->
	<rule>
		<from>^/languages(/?)$</from>
		<to>/languages.htm</to>
	</rule>
	<rule>
		<from>^/translate(/?)$</from>
		<to>/translate.htm</to>
	</rule>
	<rule>
		<from>^/translate/(\w+)(/?)$</from>
		<to>/translate.htm?locale=$1</to>
	</rule>
	<rule>
		<from>^/translate/(\w+)/(\d+)(/?)$</from>
		<to>/translate.htm?locale=$1&amp;index=$2</to>
	</rule>
	<!-- ======== FEED ========== -->
	<rule>
		<from>^/feed\.xml$</from>
		<to>/search.htm?feed=true</to>
	</rule>
	<!-- ======== FEEDBACK ========== -->
	<rule>
		<from>^/feedback(/?)$</from>
		<to>/feedback.htm</to>
	</rule>
	<rule>
		<from>^/feedback/write(/?)$</from>
		<to>/feedback.htm?write=true</to>
	</rule>
	<rule>
		<from>^/feedback/votes(/?)$</from>
		<to>/feedback.htm?sortby=votes</to>
	</rule>
	<rule>
		<from>^/feedback/updated(/?)$</from>
		<to>/feedback.htm?sortby=activity</to>
	</rule>
	<rule>
		<from>^/feedback/tag/([%\w\S][^/]+)(/?)$</from>
		<to>/feedback.htm?tag=$1</to>
	</rule>

	<rule>
		<from>^/feedback/(\d+)(/?)$</from>
		<to>/question.htm?id=$1</to>
	</rule>
	<rule>
		<from>^/feedback/(\d+)/delete(/?)$</from>
		<to>/question.htm?id=$1&amp;delete=true</to>
	</rule>
	<rule>
		<from>^/feedback/(\d+)/undelete(/?)$</from>
		<to>/question.htm?id=$1&amp;undelete=true</to>
	</rule>
	<rule>
		<from>^/feedback/(\d+)/restore/(\d+)(/?)$</from>
		<to>/question.htm?id=$1&amp;restore=true&amp;revisionid=$2</to>
	</rule>
	<rule>
		<from>^/feedback/(\d+)/approve/(\d+)(/?)$</from>
		<to>/question.htm?id=$1&amp;approve=true&amp;answerid=$2</to>
	</rule>
	<rule>
		<from>^/feedback/(\d+)/close((/?)(.*?))$</from>
		<to>/question.htm?id=$1&amp;close=true</to>
	</rule>
	<rule>
		<from>^/feedback/(\d+)/newest((/?)(.*?))$</from>
		<to>/question.htm?id=$1&amp;sortby=newest</to>
	</rule>

	<!--SEO URLs-->
	<rule>
		<from>^/feedback/(\d+)/([^write][^reply][^tag][^restore][^undelete][^undelete][^approve][^close][^newest][^updated][^votes])*.*(/?)$</from>
		<to>/question.htm?id=$1</to>
	</rule>

	<!-- ======== REPORTS ========== -->
	<rule>
		<from>^/reports(/?)$</from>
		<to>/reports.htm</to>
	</rule>
	<rule>
		<from>^/reports/reports/(\w+)(/?)$</from>
		<to>/reports.htm?show=reports&amp;type=$1</to>
	</rule>
	<rule>
		<from>^/reports/reports(/?)$</from>
		<to>/reports.htm?show=reports</to>
	</rule>
	<rule>
		<from>^/reports/close/(\d+)(/?)$</from>
		<to>/reports.htm?close=true&amp;id=$1</to>
	</rule>
	<rule>
		<from>^/reports/delete/(\d+)(/?)$</from>
		<to>/reports.htm?delete=true&amp;id=$1</to>
	</rule>

	<!-- ======== PROFILE PROTECTED RESOURCES ========== -->
	<rule>
		<from>^/admin(/?)$</from>
		<to>/admin.htm</to>
	</rule>
	<rule>
		<from>^/settings(/?)$</from>
		<to>/settings.htm</to>
	</rule>

	<rule>
		<from>^/comment(/?)$</from>
		<to>/comment.htm</to>
	</rule>
	<rule>
		<from>^/comment/(\d+)(/?)$</from>
		<to>/comment.htm?id=$1</to>
	</rule>


	<rule>
		<from>^/voteup/(\w+)/(\d+)(/?)$</from>
		<to>/?voteup=true&amp;type=$1&amp;id=$2</to>
	</rule>
	<rule>
		<from>^/votedown/(\w+)/(\d+)(/?)$</from>
		<to>/?votedown=true&amp;type=$1&amp;id=$2</to>
	</rule>

	<!-- ======== PROFILE ========== -->
	<rule>
		<from>^/profile(/?)$</from>
		<to>/profile.htm</to>
	</rule>
	<rule>
		<from>^/profile/([a-zA-Z0-9[^/]]+)(/?)$</from>
		<to>/profile.htm?id=$1</to>
	</rule>
	<rule>
		<from>^/profile/([a-zA-Z0-9[^/]]+)/update(/?)$</from>
		<to>/profile.htm?update=true&amp;id=$1</to>
	</rule>
	<rule>
		<from>^/profile/([a-zA-Z0-9[^/]]+)/edit(/?)$</from>
		<to>/profile.htm?edit=true&amp;id=$1</to>
	</rule>


	<!--SEO URLs-->
	<rule>
		<from>^/profile/(\d+)/([^contacts][^questions][^answers][^edit])*.*(/?)$</from>
		<to>/profile.htm?id=$1</to>
	</rule>

	<!-- PROTECTED -->
	<rule>
		<from>^/profile/p/(\d+)(.*)$</from>
		<to type="redirect">%{context-path}/profile/$1$2</to>
	</rule>

	<!-- ======== PEOPLE ========== -->
	<rule>
		<from>^/people(/?)$</from>
		<to>/people.htm</to>
	</rule>
	<rule>
		<from>^/people/reputation(/?)$</from>
		<to>/people.htm?sortby=rep</to>
	</rule>

	<!-- ======== QUESTIONS ========== -->
	<rule>
		<from>^/questions(/?)$</from>
		<to>/questions.htm</to>
	</rule>
	<rule>
		<from>^/question/(\d+)(/?)$</from>
		<to>/question.htm?id=$1</to>
	</rule>
	<rule>
		<from>^/question/(\d+)/delete(/?)$</from>
		<to>/question.htm?id=$1&amp;delete=true</to>
	</rule>
	<rule>
		<from>^/question/(\d+)/undelete(/?)$</from>
		<to>/question.htm?id=$1&amp;undelete=true</to>
	</rule>
	<rule>
		<from>^/post/(\d+)/revisions(/?)$</from>
		<to>/revisions.htm?id=$1</to>
	</rule>
	<rule>
		<from>^/question/(\d+)/restore/(\d+)(/?)$</from>
		<to>/question.htm?id=$1&amp;restore=true&amp;revisionid=$2</to>
	</rule>
	<rule>
		<from>^/question/(\d+)/approve/(\d+)(/?)$</from>
		<to>/question.htm?id=$1&amp;approve=true&amp;answerid=$2</to>
	</rule>
	<rule>
		<from>^/question/(\d+)/close((/?)(.*?))$</from>
		<to>/question.htm?id=$1&amp;close=true</to>
	</rule>
	<rule>
		<from>^/questions/ask(/?)$</from>
		<to>/questions.htm?ask=true</to>
	</rule>

	<rule>
		<from>^/question/(\d+)/newest((/?)(.*?))$</from>
		<to>/question.htm?id=$1&amp;sortby=newest</to>
	</rule>
	<rule>
		<from>^/questions/updated(/?)$</from>
		<to>/questions.htm?sortby=activity</to>
	</rule>
	<rule>
		<from>^/questions/votes(/?)$</from>
		<to>/questions.htm?sortby=votes</to>
	</rule>
	<rule>
		<from>^/questions/unanswered(/?)$</from>
		<to>/questions.htm?sortby=unanswered</to>
	</rule>
	<rule>
		<from>^/questions/filter(/?)$</from>
		<to>/questions.htm?sortby=filter</to>
	</rule>
	<rule>
		<from>^/questions/tag/([%\w\S][^/]+)(/?)$</from>
		<to>/questions.htm?tag=$1</to>
	</rule>
	<!--SEO URLs-->
	<rule>
		<from>^/question/(\d+)/([^answer][^reply][^tag][^restore][^delete][^undelete][^approve][^close][^newest][^ask][^selected][^votes][^updated][^unanswered][^filter])*.*(/?)$</from>
		<to>/question.htm?id=$1</to>
	</rule>

	<!-- ======== SEARCH ========== -->
	<rule>
		<from>^/search(/?)$</from>
		<to>/search.htm</to>
	</rule>
	<rule>
		<from>^/search/questions/(.*)(/?)$</from>
		<to last="true">/search.htm?q=$1&amp;show=questions</to>
	</rule>
	<rule>
		<from>^/search/answers/(.*)(/?)$</from>
		<to last="true">/search.htm?q=$1&amp;show=answers</to>
	</rule>
	<rule>
		<from>^/search/feedback/(.*)(/?)$</from>
		<to last="true">/search.htm?q=$1&amp;show=feedback</to>
	</rule>
	<rule>
		<from>^/search/people/(.*)(/?)$</from>
		<to last="true">/search.htm?q=$1&amp;show=people</to>
	</rule>

</urlrewrite>
